<?php
header('Content-Type:text/html; charset=UTF-8');
header('Access-Control-Allow-Origin: *');
header('Content-Type: application/json; charset=utf-8');
include('dbConnect.inc.php');
	




$collectionArray = array();


$supervisor_inprogress_count_array=array();
$supervisor_verified_count_array =array();
$supervisor_not_verified_count_array = array();
$supervisor_completed_count_array = array();
$supervisor_inprogress_array=array();
$supervisor_verified_array =array();
$supervisor_completed_array = array();
$supervisor_not_verified_array = array();
$supervisor_activity_log_array = array();
$supervisor_final_command_array = array();

$region = mysql_real_escape_string($_REQUEST['region']);
$user_id = mysql_real_escape_string($_REQUEST['user_id']);
$state = mysql_real_escape_string($_REQUEST['state']);

$supervisor_inprogress_count = mysql_query("select count(*) as inprogress_count from ((select ia.type,vm.Ref_no,ia.sstatus,ia.subco_status,vm.First_Name,vm.Last_Name,tn.task_name as taskname,ia.name, ct.city_name, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.status,ia.verification_user_id,ia.type as qualification_id, ia.location,ia.coordinator_id,ia.accept_on from insert_assigned_users as ia inner join cities as ct on ia.location=ct.city_id inner join user as us on us.User_Id=ia.assigned_to Inner join address_type at on ia.type=at.id inner join taskname tn on tn.task_name_id=at.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Inprogress' and ia.state='$state' and ia.assigned_to='$user_id') union (select ia.type,vm.Ref_no,ia.sstatus,ia.subco_status,vm.First_Name,vm.Last_Name,tk.task_name as taskname,ia.name, ct.city_name, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.status,ia.verification_user_id,ia.type as qualification_id, ia.location,ia.coordinator_id,ia.accept_on from insert_assigned_users as ia inner join cities as ct on ia.location=ct.city_id inner join user as us on us.User_Id=ia.assigned_to Inner join qualifications qu on ia.type=qu.qualification_id inner join taskname tk on tk.task_name_id=qu.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Inprogress' and ia.state='$state' and ia.assigned_to='$user_id') union (select ia.type,vm.Ref_no,ia.sstatus,ia.subco_status,vm.First_Name,vm.Last_Name, te.task_name as taskname,ia.name, ct.city_name, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.status,ia.verification_user_id,ia.type as qualification_id, ia.location,ia.coordinator_id,ia.accept_on from insert_assigned_users as ia inner join cities as ct on ia.location=ct.city_id inner join user as us on us.User_Id=ia.assigned_to Inner join employment em on ia.type=em.empid inner join taskname te on te.task_name_id=em.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Inprogress' and ia.state='$state' and ia.assigned_to='$user_id') union (select ia.type,vm.Ref_no,ia.sstatus,ia.subco_status,vm.First_Name,vm.Last_Name, te.task_name as taskname,ia.name, ct.city_name, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.status,ia.verification_user_id,ia.type as qualification_id, ia.location,ia.coordinator_id,ia.accept_on from insert_assigned_users as ia inner join cities as ct on ia.location=ct.city_id inner join user as us on us.User_Id=ia.assigned_to Inner join property_type pt on ia.type=pt.pro_id inner join taskname te on te.task_name_id=pt.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Inprogress' and ia.state='$state' and ia.assigned_to='$user_id') union (select ia.type,vm.Ref_no,ia.sstatus,ia.subco_status,vm.First_Name,vm.Last_Name, te.task_name as taskname,ia.name, ct.city_name, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.status,ia.verification_user_id,ia.type as qualification_id, ia.location,ia.coordinator_id,ia.accept_on from insert_assigned_users as ia inner join cities as ct on ia.location=ct.city_id inner join user as us on us.User_Id=ia.assigned_to Inner join acc_mode am on ia.type=am.acc_id inner join taskname te on te.task_name_id=am.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Inprogress' and ia.state='$state' and ia.assigned_to='$user_id') union (select ia.type,vm.Ref_no,ia.sstatus,ia.subco_status,vm.First_Name,vm.Last_Name, te.task_name as taskname,ia.name, ct.city_name, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.status,ia.verification_user_id,ia.type as qualification_id, ia.location,ia.coordinator_id,ia.accept_on from insert_assigned_users as ia inner join cities as ct on ia.location=ct.city_id inner join user as us on us.User_Id=ia.assigned_to Inner join address_group ag on ia.type=ag.add_grp_id inner join taskname te on te.task_name_id=ag.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Inprogress' and ia.state='$state' and ia.assigned_to='$user_id')Order by assigned_on Desc) as dfg"); 
if(mysql_num_rows($supervisor_inprogress_count)== 0){
 	$supervisor_inprogress_count['data new veri'][] =  0;
	}
	else{
	 while($r500 = mysql_fetch_array($supervisor_inprogress_count)) {

	array_push($supervisor_inprogress_count_array,$r500);

}
}

$supervisor_verified_count = mysql_query("select count(*) as super_verified_count from ((select vm.Ref_no,vm.First_Name,vm.Last_Name,tn.task_name as taskname, ia.name,ia.verification_user_id,ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join address_type at on ia.type=at.id inner join taskname tn on tn.task_name_id=at.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Verified'and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,tk.task_name as taskname, ia.name,ia.verification_user_id,ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join qualifications qu on ia.type=qu.qualification_id inner join taskname tk on tk.task_name_id=qu.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Verified'and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ia.name,ia.verification_user_id,ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join employment em on ia.type=em.empid inner join taskname te on te.task_name_id=em.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Verified'and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ia.name,ia.verification_user_id,ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join property_type pt on ia.type=pt.pro_id inner join taskname te on te.task_name_id=pt.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Verified') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ia.name,ia.verification_user_id,ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join acc_mode am on ia.type=am.acc_id inner join taskname te on te.task_name_id=am.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Verified'and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ia.name,ia.verification_user_id,ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join address_group ag on ia.type=ag.add_grp_id inner join taskname te on te.task_name_id=ag.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Verified'and ia.assigned_to='$user_id')order by verified_on Desc) as dfg"); 
if(mysql_num_rows($supervisor_verified_count)== 0){
 	$supervisor_verified_count['data new veri'][] =  0;
	}
	else{
	 while($r5001 = mysql_fetch_array($supervisor_verified_count)) {

	array_push($supervisor_verified_count_array,$r5001);

}
}

$supervisor_not_verified_count = mysql_query("select count(*) as supervisor_not_verified_count_array from((select vm.Doc,ia.ref_no,ia.notverified_on,vm.First_Name,vm.Last_Name,tn.task_name as taskname, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.verification_user_id,ia.type from insert_assigned_users as ia Inner join address_type at on ia.type=at.id inner join taskname tn on tn.task_name_id=at.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Notverified' and ia.state='$state' and ia.assigned_to='$user_id') union(select vm.Doc,ia.ref_no,ia.notverified_on,vm.First_Name,vm.Last_Name,tk.task_name as taskname, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.verification_user_id,ia.type from insert_assigned_users as ia Inner join qualifications qu on ia.type=qu.qualification_id inner join taskname tk on tk.task_name_id=qu.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Notverified' and ia.state='$state' and ia.assigned_to='$user_id') union(select vm.Doc,ia.ref_no,ia.notverified_on,vm.First_Name,vm.Last_Name,te.task_name as taskname, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.verification_user_id,ia.type from insert_assigned_users as ia Inner join employment em on ia.type=em.empid inner join taskname te on te.task_name_id=em.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Notverified' and ia.state='$state' and ia.assigned_to='$user_id') union(select vm.Doc,ia.ref_no,ia.notverified_on,vm.First_Name,vm.Last_Name,te.task_name as taskname, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.verification_user_id,ia.type from insert_assigned_users as ia Inner join property_type pt on ia.type=pt.pro_id inner join taskname te on te.task_name_id=pt.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Notverified' and ia.state='$state' and ia.assigned_to='$user_id') union(select vm.Doc,ia.ref_no,ia.notverified_on,vm.First_Name,vm.Last_Name,te.task_name as taskname, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.verification_user_id,ia.type from insert_assigned_users as ia Inner join address_group ag on ia.type=ag.add_grp_id inner join taskname te on te.task_name_id=ag.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Notverified' and ia.state='$state' and ia.assigned_to='$user_id') order by notverified_on Desc) as dfgew"); 
if(mysql_num_rows($supervisor_not_verified_count)== 0){
 	$supervisor_not_verified_count_array['data new veri'][] =  0;
	}
	else{
	 while($r9111 = mysql_fetch_array($supervisor_not_verified_count)) {

	array_push($supervisor_not_verified_count_array,$r9111);

}
}

$supervisor_verified_count = mysql_query("select count(*) as completed_count from ((select vm.Ref_no,vm.First_Name,vm.Last_Name,tn.task_name as taskname,ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on,ia.verification_user_id,ia.approved_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join address_type at on ia.type=at.id inner join taskname tn on tn.task_name_id=at.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Approved' and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,tk.task_name as taskname, ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on,ia.verification_user_id,ia.approved_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join qualifications qu on ia.type=qu.qualification_id inner join taskname tk on tk.task_name_id=qu.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Approved' and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on,ia.verification_user_id,ia.approved_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join employment em on ia.type=em.empid inner join taskname te on te.task_name_id=em.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Approved' and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on,ia.verification_user_id,ia.approved_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join property_type pt on ia.type=pt.pro_id inner join taskname te on te.task_name_id=pt.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Approved' and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on,ia.verification_user_id,ia.approved_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join acc_mode am on ia.type=am.acc_id inner join taskname te on te.task_name_id=am.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Approved' and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on,ia.verification_user_id,ia.approved_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join address_group ag on ia.type=ag.add_grp_id inner join taskname te on te.task_name_id=ag.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Approved' and ia.assigned_to='$user_id')order by approved_on DESC) as hgj"); 
if(mysql_num_rows($supervisor_verified_count)== 0){
 	$supervisor_verified_count['data new veri'][] =  0;
	}
	else{
	 while($r50101 = mysql_fetch_array($supervisor_verified_count)) {

	array_push($supervisor_completed_count_array,$r50101);

}
}

 $lverification_inpro="(select ia.type,vm.Ref_no,ia.sstatus,ia.subco_status,vm.First_Name,vm.Last_Name,tn.task_name as taskname,ia.name, ct.city_name, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.status,ia.verification_user_id,ia.type as qualification_id, ia.location,ia.coordinator_id,ia.accept_on from insert_assigned_users as ia inner join cities as ct on ia.location=ct.city_id inner join user as us on us.User_Id=ia.assigned_to Inner join address_type at on ia.type=at.id inner join taskname tn on tn.task_name_id=at.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Inprogress' and ia.state='$state' and ia.assigned_to='$user_id') union (select ia.type,vm.Ref_no,ia.sstatus,ia.subco_status,vm.First_Name,vm.Last_Name,tk.task_name as taskname,ia.name, ct.city_name, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.status,ia.verification_user_id,ia.type as qualification_id, ia.location,ia.coordinator_id,ia.accept_on from insert_assigned_users as ia inner join cities as ct on ia.location=ct.city_id inner join user as us on us.User_Id=ia.assigned_to Inner join qualifications qu on ia.type=qu.qualification_id inner join taskname tk on tk.task_name_id=qu.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Inprogress' and ia.state='$state' and ia.assigned_to='$user_id') union (select ia.type,vm.Ref_no,ia.sstatus,ia.subco_status,vm.First_Name,vm.Last_Name, te.task_name as taskname,ia.name, ct.city_name, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.status,ia.verification_user_id,ia.type as qualification_id, ia.location,ia.coordinator_id,ia.accept_on from insert_assigned_users as ia inner join cities as ct on ia.location=ct.city_id inner join user as us on us.User_Id=ia.assigned_to Inner join employment em on ia.type=em.empid inner join taskname te on te.task_name_id=em.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Inprogress' and ia.state='$state' and ia.assigned_to='$user_id') union (select ia.type,vm.Ref_no,ia.sstatus,ia.subco_status,vm.First_Name,vm.Last_Name, te.task_name as taskname,ia.name, ct.city_name, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.status,ia.verification_user_id,ia.type as qualification_id, ia.location,ia.coordinator_id,ia.accept_on from insert_assigned_users as ia inner join cities as ct on ia.location=ct.city_id inner join user as us on us.User_Id=ia.assigned_to Inner join property_type pt on ia.type=pt.pro_id inner join taskname te on te.task_name_id=pt.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Inprogress' and ia.state='$state' and ia.assigned_to='$user_id') union (select ia.type,vm.Ref_no,ia.sstatus,ia.subco_status,vm.First_Name,vm.Last_Name, te.task_name as taskname,ia.name, ct.city_name, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.status,ia.verification_user_id,ia.type as qualification_id, ia.location,ia.coordinator_id,ia.accept_on from insert_assigned_users as ia inner join cities as ct on ia.location=ct.city_id inner join user as us on us.User_Id=ia.assigned_to Inner join acc_mode am on ia.type=am.acc_id inner join taskname te on te.task_name_id=am.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Inprogress' and ia.state='$state' and ia.assigned_to='$user_id') union (select ia.type,vm.Ref_no,ia.sstatus,ia.subco_status,vm.First_Name,vm.Last_Name, te.task_name as taskname,ia.name, ct.city_name, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.status,ia.verification_user_id,ia.type as qualification_id, ia.location,ia.coordinator_id,ia.accept_on from insert_assigned_users as ia inner join cities as ct on ia.location=ct.city_id inner join user as us on us.User_Id=ia.assigned_to Inner join address_group ag on ia.type=ag.add_grp_id inner join taskname te on te.task_name_id=ag.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Inprogress' and ia.state='$state' and ia.assigned_to='$user_id')Order by assigned_on Desc" ;
                    
  $lverification_inpro=mysql_query($lverification_inpro);


	
	while($r4 = mysql_fetch_array($lverification_inpro)) {

	array_push($supervisor_inprogress_array,$r4);

 }

$lverification_veri="(select vm.Ref_no,vm.First_Name,vm.Last_Name,tn.task_name as taskname, ia.name,ia.verification_user_id,ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join address_type at on ia.type=at.id inner join taskname tn on tn.task_name_id=at.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Verified'and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,tk.task_name as taskname, ia.name,ia.verification_user_id,ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join qualifications qu on ia.type=qu.qualification_id inner join taskname tk on tk.task_name_id=qu.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Verified'and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ia.name,ia.verification_user_id,ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join employment em on ia.type=em.empid inner join taskname te on te.task_name_id=em.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Verified'and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ia.name,ia.verification_user_id,ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join property_type pt on ia.type=pt.pro_id inner join taskname te on te.task_name_id=pt.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Verified') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ia.name,ia.verification_user_id,ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join acc_mode am on ia.type=am.acc_id inner join taskname te on te.task_name_id=am.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Verified'and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ia.name,ia.verification_user_id,ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join address_group ag on ia.type=ag.add_grp_id inner join taskname te on te.task_name_id=ag.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Verified'and ia.assigned_to='$user_id')order by verified_on Desc" ;
                    
      $lverification_veri=mysql_query($lverification_veri);

	
	 while($r6 = mysql_fetch_array($lverification_veri)) {

	array_push($supervisor_verified_array,$r6);

}

$lverification_completed="(select vm.Ref_no,vm.First_Name,vm.Last_Name,tn.task_name as taskname,ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on,ia.verification_user_id,ia.approved_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join address_type at on ia.type=at.id inner join taskname tn on tn.task_name_id=at.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Approved' and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,tk.task_name as taskname, ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on,ia.verification_user_id,ia.approved_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join qualifications qu on ia.type=qu.qualification_id inner join taskname tk on tk.task_name_id=qu.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Approved' and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on,ia.verification_user_id,ia.approved_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join employment em on ia.type=em.empid inner join taskname te on te.task_name_id=em.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Approved' and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on,ia.verification_user_id,ia.approved_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join property_type pt on ia.type=pt.pro_id inner join taskname te on te.task_name_id=pt.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Approved' and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on,ia.verification_user_id,ia.approved_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join acc_mode am on ia.type=am.acc_id inner join taskname te on te.task_name_id=am.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Approved' and ia.assigned_to='$user_id') union (select vm.Ref_no,vm.First_Name,vm.Last_Name,te.task_name as taskname, ct.city_name,ia.type,ia.verification_for,ia.qualification_name,ia.assigned_on,ia.verified_on,ia.verification_user_id,ia.approved_on from insert_assigned_users as ia inner join cities as ct on ct.city_id=ia.location inner join user as us on us.User_Id=ia.assigned_to Inner join address_group ag on ia.type=ag.add_grp_id inner join taskname te on te.task_name_id=ag.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.state='$state' and sstatus='Approved' and ia.assigned_to='$user_id')order by approved_on DESC";
                    
      $lverification_completed=mysql_query($lverification_completed);

	
	 while($r10 = mysql_fetch_array($lverification_completed)) {

	array_push($supervisor_completed_array,$r10);
}

$lverification_not_veri="(select vm.Doc,vm.Ref_no,ia.notverified_on,ia.assigned_on,vm.First_Name,vm.Last_Name,tn.task_name as taskname, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.verification_user_id,ia.type from insert_assigned_users as ia Inner join address_type at on ia.type=at.id inner join taskname tn on tn.task_name_id=at.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Notverified' and ia.state='$state' and ia.assigned_to='$user_id') union(select vm.Doc,vm.Ref_no,ia.notverified_on,ia.assigned_on,vm.First_Name,vm.Last_Name,tk.task_name as taskname, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.verification_user_id,ia.type from insert_assigned_users as ia Inner join qualifications qu on ia.type=qu.qualification_id inner join taskname tk on tk.task_name_id=qu.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Notverified' and ia.state='$state' and ia.assigned_to='$user_id') union(select vm.Doc,vm.Ref_no,ia.notverified_on,ia.assigned_on,vm.First_Name,vm.Last_Name,te.task_name as taskname, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.verification_user_id,ia.type from insert_assigned_users as ia Inner join employment em on ia.type=em.empid inner join taskname te on te.task_name_id=em.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Notverified' and ia.state='$state' and ia.assigned_to='$user_id') union(select vm.Doc,vm.Ref_no,ia.notverified_on,ia.assigned_on,vm.First_Name,vm.Last_Name,te.task_name as taskname, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.verification_user_id,ia.type from insert_assigned_users as ia Inner join property_type pt on ia.type=pt.pro_id inner join taskname te on te.task_name_id=pt.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Notverified' and ia.state='$state' and ia.assigned_to='$user_id') union(select vm.Doc,vm.Ref_no,ia.notverified_on,ia.assigned_on,vm.First_Name,vm.Last_Name,te.task_name as taskname, ia.verification_for, ia.qualification_name,ia.assigned_on, ia.verification_user_id,ia.type from insert_assigned_users as ia Inner join address_group ag on ia.type=ag.add_grp_id inner join taskname te on te.task_name_id=ag.task_name_id inner join verification_master vm on vm.Verification_Master_Id =ia.verification_user_id where ia.sstatus = 'Notverified' and ia.state='$state' and ia.assigned_to='$user_id') order by notverified_on Desc";
                    
      $lverification_not_veri=mysql_query($lverification_not_veri);


	
	 while($r8 = mysql_fetch_array($lverification_not_veri)) {

	array_push($supervisor_not_verified_array,$r8);

}

$supervisor_activity_log =mysql_query("select * from supervisor_activity_log");
	
	 while($r16 = mysql_fetch_array($supervisor_activity_log)) {

	array_push($supervisor_activity_log_array,$r16);

}

$final_command = mysql_query("SELECT * FROM `supervisor_final_command`"); 
if(mysql_num_rows($final_command)== 0){
 	$supervisor_final_command_array['data new veri'][] =  0;
	}
	else{
	 while($r7 = mysql_fetch_array($final_command)) {
	array_push($supervisor_final_command_array,$r7);
}
}

//array_push($collectionArray,$new_verification_count_array);
array_push($collectionArray,$supervisor_inprogress_count_array);
array_push($collectionArray,$supervisor_verified_count_array);
array_push($collectionArray,$supervisor_completed_count_array);
array_push($collectionArray,$supervisor_not_verified_count_array);

array_push($collectionArray,$supervisor_inprogress_array);
array_push($collectionArray,$supervisor_verified_array);
array_push($collectionArray,$supervisor_completed_array);
array_push($collectionArray,$supervisor_not_verified_array);
array_push($collectionArray,$supervisor_activity_log_array);
array_push($collectionArray,$supervisor_final_command_array);




 
print json_encode($collectionArray, JSON_NUMERIC_CHECK);

?>